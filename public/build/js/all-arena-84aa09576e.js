function fnSistemaController(a,e){a.onLoadArena=function(){a.meusBoloes=[],a.todosBoloes=[],a.adminBolao=[],a.adminBolao.confirmaDelete=!1,a.limitesList=[{id:"5",valor:"5"},{id:"10",valor:"10"},{id:"15",valor:"15"},{id:"20",valor:"20"},{id:"25",valor:"25"},{id:"30",valor:"30"}],a.pessoalLimite="5",a.geralLimite="15",a.getUsuarioBolao(),a.getTodosBoloes()},a.getUsuarioBolao=function(){e.get("/bolao/usuario_bolao").success(function(e){"sucesso"===e.estado&&(a.meusBoloes=e.lista),"vazio"===e.estado&&angular.element("#vazioMeusBoloes").show(),"erro"===e.estado&&angular.element("#erroMeusBoloes").show()}).error(function(){angular.element("#erroMeusBoloes").show()})["finally"](function(){angular.element("#carregaMeusBoloes").hide()})},a.getTodosBoloes=function(){e.get("/bolao/todos_bolao").success(function(e){"sucesso"===e.estado&&(a.todosBoloes=e.lista),"vazio"===e.estado&&angular.element("#vazioTodosBoloes").show(),"erro"===e.estado&&angular.element("#erroTodosBoloes").show()}).error(function(){angular.element("#erroTodosBoloes").show()})["finally"](function(){angular.element("#carregaTodosBoloes").hide()})},a.carregaCompeticao=function(){e.get("/ws/competicoes").success(function(e){a.competicoes=e,a.novoBolao.id_competicao=""})},a.gravaNovoBolao=function(){angular.element(".alerta-oculto").hide(),a.formNovoBolao.$valid&&(iconeEspera("iconeBtnCria","fa-plus","ativa"),e.post("/bolao/cria",a.novoBolao).success(function(e){"sucesso"===e.estado?(a.meusBoloes=e.listaMeus,a.todosBoloes=e.listaTodos,angular.element("#mdNovoBolao").modal("hide"),angular.element(".limpar").val("").html("").prop("checked",!1),angular.element("#vazioMeusBoloes").hide(),angular.element("#vazioTodosBoloes").hide()):angular.element("#avisoCriaErro").show()}).error(function(){angular.element("#avisoCriaErro").show()})["finally"](function(){iconeEspera("iconeBtnCria","fa-plus","desativa"),e.get("/ws/gettoken").success(function(e){a.novoBolao._token=e.token})}))},a.carregaDetalheBolao=function(o){a.adminBolao.confirmaDelete=!1,angular.element("#mdDetalheBolao").modal("show"),e.get("/bolao/detalhe/"+o.id).success(function(e){a.detalheBolao=e})},a.entrarBolao=function(o){e.post("/bolao/solicita_entrada/"+o.id).success(function(e){"sucesso"===e.estado&&(a.detalheBolao=e.detalheBolao,a.meusBoloes=e.listaMeus)})},a.cancelarSolicitacao=function(o){e["delete"]("/bolao/cancela_convite/"+o.id).success(function(e){"sucesso"===e.estado&&(a.detalheBolao=e.detalheBolao,a.meusBoloes=e.listaMeus)})},a.sairBolao=function(o){e["delete"]("/bolao/sair_bolao/"+o.id).success(function(e){"sucesso"===e.estado&&(a.detalheBolao=e.detalheBolao,a.meusBoloes=e.listaMeus)})},a.deleteBolao=function(o){e["delete"]("/bolao/delete_bolao/"+o).success(function(e){"sucesso"===e.estado&&(a.meusBoloes=e.listaMeus,a.todosBoloes=e.listaTodos),angular.element("#mdDetalheBolao").modal("hide")})},a.respostaConvite=function(o,t){var s={bolao:o,acao:t};e.post("/bolao/resposta_convite",s).success(function(e){a.detalheBolao=e.detalheBolao})},a.respostaConviteGeral=function(o,t){var s={bolao:o,acao:t};e.post("/bolao/resposta_convite",s).success(function(){a.mostraListaConvitePendente()})},a.banirParticipante=function(o,t){var s={participante:o,bolao:t.id};e.post("/bolao/banir_participante",s).success(function(e){a.detalheBolao=e.detalheBolao})},a.mostraListaConvitePendente=function(){angular.element("#listaConvitesPendentesVazia").hide(),e.get("/bolao/convites_pendentes").success(function(e){a.listaConvites=e.length,a.listaConvitesPendentes=e,0==e.length&&angular.element("#listaConvitesPendentesVazia").show()}),angular.element("#mdListaConvites").modal("show")},a.onLoadPalpite=function(){a.gravado=!1,a.getUsuarioBolao()},a.carregaPartidasParaPalpitar=function(){angular.element("#listaCarregando").show(),e.get("/palpite/para_palpitar/"+a.palpite.id_bolao).success(function(e){a.listaPalpites=e.palpites,a.palpite.itemPorPagina=e.qtd_rodada,0==e.palpites.length&&angular.element("#listaVazia").show()}).then(function(){angular.element("#listaCarregando").hide()})},a.carregaPartidasParaConferir=function(){angular.element("#listaCarregando").show(),e.get("/palpite/para_conferir/"+a.palpite.id_bolao).success(function(e){a.listaPalpites=e.palpites,a.palpite.itemPorPagina=e.qtd_rodada,0==e.palpites.length&&angular.element("#listaVazia").show()}).then(function(){angular.element("#listaCarregando").hide()})},a.gravaPalpite=function(o){if(""==o.palpite_casa||""==o.palpite_visitante)return!1;var t={_token:o._token,id_bolao:a.palpite.id_bolao,id_palpite:o.id_palpite,id_partida:o.id_partida,id_competicao:o.id_competicao,palpite_casa:o.palpite_casa,palpite_penalti_casa:o.palpite_penalti_casa,palpite_penalti_visitante:o.palpite_penalti_visitante,palpite_visitante:o.palpite_visitante};e.post("/palpite/save_palpite",t).success(function(e){a.gravado=!0,o.id_palpite=e.id_palpite,angular.element("#box-palpite-"+o.id_partida).removeClass("inserido"),angular.element("#box-palpite-"+o.id_partida).addClass("gravado")})},a.outrosPalpites=function(o){a.detalhePalpite=o,e.get("/palpite/palpites_usuarios/"+a.palpite.id_bolao+"/"+o.id_partida).success(function(e){a.listaPalpiteUsuario=e,angular.element("#mdOutrosPalpites").modal("show"),0==e.length&&angular.element("#listaVazia_"+o.id_partida).show()})},a.onLoadBolao=function(){a.getclassificacaoRodada(),a.getclassificacaoMensal()},a.getclassificacaoRodada=function(){e.get("/bolao/classificacao_rodada/"+angular.element("#id_bolao").val()).success(function(e){a.classificacaoRodada=e})},a.getclassificacaoMensal=function(){e.get("/bolao/classificacao_mensal/"+angular.element("#id_bolao").val()).success(function(e){a.classificacaoMensal=e})},a.getNotificacoes=function(){e.get("/ws/mensagens/").success(function(e){var o=0;angular.forEach(e,function(a){a.lido||o++}),a.mensagensQtd=o,a.listaMensagem=e})},a.getNotificacoes(),a.arquivaMensagem=function(o){e.post("/mensagem/arquiva/"+o.id).success(function(e){"sucesso"===e.estado&&(a.mensagensQtd=a.mensagensQtd-1,angular.element("#mensagem-"+o.id).alert("close"))})}}fnSistemaController.$inject=["$scope","$http"],angular.module("app").controller("sistemaController",fnSistemaController);