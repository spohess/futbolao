{"version":3,"sources":["usuario.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"all-usuario.js","sourcesContent":["function fnSistemaController($scope, $http) {\n\n    $scope.onLoadUsuario = function(){\n    };\n\n    $scope.validaEmail = function(){\n        if( $scope.formDadosUsuario.email.$invalid ){\n            return false;\n        }\n\n        angular.element(\".aviso-email\").hide();\n        $http.post('/usuario/validaemail', $scope.usuario)\n        .success(function(dados){\n            if( dados.estado == 'invalido' ){\n                angular.element(\".aviso-email\").show();\n                $scope.usuario.emailValido = 'invalido';\n            } else {\n                $scope.usuario.emailValido = 'valido';\n            }\n        })\n        .error(function(dados){\n            angular.element(\".aviso-email\").show();\n            $scope.usuario.emailValido = 'invalido';\n        });\n    }\n\n    $scope.validaLogin = function(){\n        if( $scope.formDadosUsuario.login.$invalid ){\n            return false;\n        }\n        angular.element(\".aviso-login-valido\").hide();\n        angular.element(\".aviso-login-invalido\").hide();\n\n        $http.post('/usuario/validalogin', $scope.usuario)\n        .success(function(dados){\n            if( dados.estado == 'valido' ){\n                angular.element(\".aviso-login-valido\").show();\n                $scope.usuario.loginValido = 'valido';\n            } else {\n                angular.element(\".aviso-login-invalido\").show();\n                $scope.usuario.loginValido = 'invalido';\n            }\n        })\n        .error(function(dados){\n            angular.element(\".aviso-login-invalido\").show();\n            $scope.usuario.loginValido = 'invalido';\n        });\n    }\n\n    $scope.atualizaUsuario = function(){\n        if( $scope.formDadosUsuario.$invalid ){\n            return false;\n        }\n        iconeEspera('iconeBtnAtualiza', 'fa-save', 'ativa');\n\n        var erro = 0\n        if( $scope.usuario.emailValido == 'invalido' ){\n            angular.element(\".aviso-email\").show();\n            erro++;\n        }\n        if( $scope.usuario.loginValido == 'invalido' ){\n            angular.element(\".aviso-login-invalido\").show();\n            erro++;\n        }\n        if( erro == 0 ){\n\n            angular.element(\".alerta-oculto\").hide();\n\n            $http.put('/usuario', $scope.usuario)\n            .success(function(dados){\n                if( dados.estado == 'senhaAtualInvalida' ){\n                    angular.element(\"#avisoSenhaAtualInvalida\").show();\n                }\n\n                if( dados.estado == 'sucesso' ){\n                    angular.element(\"#avisoAtualizacaoSucesso\").show();\n                    $scope.usuario.senha = [];\n                    $scope.usuario.resenha = [];\n                    $scope.usuario.senhaAtual = [];\n                    angular.element(\"form[name=formDadosUsuario]\").validator('destroy');\n                }\n            })\n            .then(function(){\n                iconeEspera('iconeBtnAtualiza', 'fa-save', 'desativa');\n            });\n        }\n    }\n\n    $scope.reenviaConfirmacao = function(){\n        if( $scope.formReenviaConf.$invalid ){\n            return false;\n        }\n\n        iconeEspera('iconeBtnReenvia', 'fa-send', 'ativa');\n        $http.post('/usuario/reenvia', $scope.reenvia)\n        .success(function(dados){\n            if( dados.estado == 'confirmado' ){\n                angular.element(\".alerta-oculto\").hide();\n                angular.element(\"#avisoReenviaErro\").show();\n            }\n            if( dados.estado == 'sucesso' ) {\n                angular.element(\".alerta-oculto\").hide();\n                angular.element(\"#avisoReenviaSucesso\").show();\n                angular.element(\"#btnReenviaConfirmacao\").hide();\n                angular.element('#btnFechaReenviaConfirmacao').show();\n                $scope.reenvia = [];\n                angular.element(\"form[name=formReenviaConf]\").validator('destroy');\n            }\n        })\n        .error(function(dados){\n            angular.element(\".alerta-oculto\").hide();\n            angular.element(\"#avisoReenviaErroDesconhecido\").show();\n        })\n        .then(function(){\n            iconeEspera('iconeBtnReenvia', 'fa-send', 'desativa');\n        });\n    }\n\n    $scope.selecionaAvatar = function(avatar){\n        var dadosPut = {\n            id: avatar\n        }\n        $http.put('/usuario/avatar', dadosPut)\n        .success(function(dados){\n            if(dados.estado == 'sucesso'){\n                angular.element(\".ativo\").removeClass(\"ativo\");\n                angular.element(\".avatar-\" + avatar).addClass(\"ativo\");\n            }\n        });\n    }\n\n}\nfnSistemaController.$inject = ['$scope', '$http'];\nangular.module('app').controller('sistemaController', fnSistemaController);"],"sourceRoot":"/source/"}